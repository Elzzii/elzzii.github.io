<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/queue.v1.min.js"></script>
</head>
<style>
    svg {
  display: block;
  margin-left: auto;
  margin-right: auto;
  border: 0px;
}
    #btn{
        padding-left:520px;
        padding-top:10px;
    }
    button{
        font-size:14px;
        padding:10px;
        border-radius:5px;
        background:#f4c9cc;

    }
    button:hover{
       font-size:16px;
       background: #da3033
    }
    #name{
       padding-top:30px;
       padding-left:670px;
       color:#d22b3b;
    }
    body{
       background:#d5cbcc;
       border:2px;
    }
</style>
<body>
<div id="btn">
<button onclick="pink()" id="btn1">粉色系</button>
<button onclick="orange()" id="btn2">橙色系</button>
<button onclick="brown()" id="btn3">棕色系</button>
<button onclick="red()" id="btn4">红色系</button>
    <button onclick="luose()" id="btn5">裸色系</button>
    <button onclick="wird()" id="btn6">奇怪系</button>
    </div>
<div id="name"></div>

<div id="brand1"></div>
<div id="brand2"></div>
<div id="brand3"></div>
<div id="brand4"></div>
<div id="brand5"></div>
<div id="brand6"></div>
<div id="brand7"></div>

<svg ></svg>

<script>
var width=1000,height=800;
var padding = { top: 50, right: 50, bottom: 50, left: 50 };

queue().defer(d3.json,"lipstick.json").await(ready);

        //存储数据数据，读入数据
        var colorList = [];  //color list
        var nameList = [];  //lipstick name list
        var idList = [];  //lipstick id
        var seriesList = [];  //series list
        var seriesNameList = []  //series name list
        var seriesId = [];  //series id
        var brandsNameList = [];  //brand name list
        var brandId = []; //brand id
        var brandDataset = [];  //brand dataset for attribution
        var seriesNameDataset = [];  //series name dataset for attribution
        var seriesPriceDataset = [];  //series price dataset for
        var hsvcolorList = [];
        var positionsofb = [];
        var sortType=[];

function ready(error,data){
      data.brands.forEach(function(d,i){
           brandsNameList.push(d.name);
           seriesList.push(d.series);
})

            for (var i = 0, n = 0; i < seriesList.length; i++) {
                let bid = i;
                for (var j = 0; j < seriesList[i].length; j++) {
                    let seriesName = seriesList[i][j].name;
                    let seriesPrice = seriesList[i][j].price;
                    seriesNameList.push(seriesName);
                    seriesList[i][j].lipsticks.forEach(function (d, i) {
                        colorList.push(d.color);
                        nameList.push(d.name);
                        idList.push(d.id);
                        brandDataset.push(brandsNameList[bid]);
                        seriesNameDataset.push(seriesName);
                        seriesPriceDataset.push(seriesPrice);
                        seriesId.push(j + n);
                        brandId.push(bid);
                        hsvcolorList.push(rgb2hsv(d.color));

                        let color1=rgb2hsv(d.color)
                    //粉色系
                        let pink0='#ff1986'
                        let pink1='#e2397a'
                        let pink2='#fd3961'
                        let pink3='#f63c9d'
                        let pink4='#ff717a'
                        //颜色之间的距离
                        let dis00=HsvDis(rgb2hsv(pink0),color1)
                        let dis01=HsvDis(rgb2hsv(pink1),color1)
                        let dis02=HsvDis(rgb2hsv(pink2),color1)
                        let dis03=HsvDis(rgb2hsv(pink3),color1)
                        let dis04=HsvDis(rgb2hsv(pink4),color1)

                    //橙色系
                        let orange0='#ff4a43'
                        let orange1='#ff3026'
                        let orange2='#ff3d48'
                        let orange3='#ff4c24'
                        let orange4='#e76100'
                        let orange5='#bb3c32'

                        let dis10=HsvDis(rgb2hsv(orange0),color1)
                        let dis11=HsvDis(rgb2hsv(orange1),color1)
                        let dis12=HsvDis(rgb2hsv(orange2),color1)
                        let dis13=HsvDis(rgb2hsv(orange3),color1)
                        let dis14=HsvDis(rgb2hsv(orange4),color1)
                        let dis15=HsvDis(rgb2hsv(orange5),color1)

                    //棕色系
                        let brown0='#835d52'
                        let brown1='#905245'
                        let brown2='#954637'
                        let brown3='#a5381d'
                        let brown4='#ac554c'
                        let brown5='#7f171e'

                        let dis20=HsvDis(rgb2hsv(brown0),color1)
                        let dis21=HsvDis(rgb2hsv(brown1),color1)
                        let dis22=HsvDis(rgb2hsv(brown2),color1)
                        let dis23=HsvDis(rgb2hsv(brown3),color1)
                        let dis24=HsvDis(rgb2hsv(brown4),color1)
                        let dis25=HsvDis(rgb2hsv(brown5),color1)

                    //红色系
                        let red0='#e8181d' //气质复古红
                        let red1='#b3181d' //深血红
                        let red2='#ad0632'
                        let red3='#9b141b'
                        let red4='#ff0000'

                        let dis30=HsvDis(rgb2hsv(red0),color1)
                        let dis31=HsvDis(rgb2hsv(red1),color1)
                        let dis32=HsvDis(rgb2hsv(red2),color1)
                        let dis33=HsvDis(rgb2hsv(red3),color1)
                        let dis34=HsvDis(rgb2hsv(red4),color1)

                    //裸色系
                        let luose0='#e7c7af'
                        let luose1='#eebbb8'
                        let luose2='#ae7558'
                        let luose3='#cda39b'
                        let luose4='#f4a88e'

                        let dis40=HsvDis(rgb2hsv(luose0),color1)
                        let dis41=HsvDis(rgb2hsv(luose1),color1)
                        let dis42=HsvDis(rgb2hsv(luose2),color1)
                        let dis43=HsvDis(rgb2hsv(luose3),color1)
                        let dis44=HsvDis(rgb2hsv(luose4),color1)


                        if(dis00<200000||dis01<120000||dis02<200000||dis03<290000||dis04<150000)  //pink
                              sortType.push(0);
                        else if(dis10<=300000||dis11<=300000||dis12<=300000||dis13<310000||dis14<200000||dis15<100000)   //orange
                              sortType.push(1);
                        else if(dis40<=200000||dis41<=200000||dis42<180000||dis43<=200000||dis44<=190000)  //luose
                             sortType.push(4);
                        else if(dis20<=200000||dis21<200000||dis22<300000||dis23<180000||dis24<210000||dis25<300000)   //brown
                             sortType.push(2);
                         else if(dis30<300000||dis31<300000||dis32<300000||dis33<250000||dis34<300000)  //red
                             sortType.push(3);
                        else                  //wird
                             sortType.push(5);
                    })
                }
            }
};
       //粉色按钮
         function pink(){

         d3.select('svg').remove();
         var svg=d3.select('body').append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");
             var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==0){
                   if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                   }

                   var circle=svg.append('circle')
                      .attr('cx',function(i){
                            cx=cx+40;
                           return cx;
                      })
                      .attr('cy',function(i){

                        return cy;
                      })
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(function(){
                         return nameList[i];
                      })
                      .on("mouseover",function(){
                              var name=d3.select("#name");
                              name.text(d3.select(this).text())

                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)

                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);
            })
            n++;
                }
             }
         }

       //orange按钮
         function orange(){
                  d3.select('svg').remove()

                  var svg=d3.select("body").append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");

            var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==1){
                if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                   }
                   var circle=svg.append('circle')
                      .attr('cx',function(){
                         cx=cx+40;
                         return cx;
                      })
                      .attr('cy',cy)
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(nameList[i])
                      .on("mouseover",function(){
                            var name=d3.select("#name");
                              name.text(d3.select(this).text())

                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)

                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);
            })
            n++;
                }
             }
         }

        //brown按钮
         function brown(){
                  d3.select('svg').remove();
                  var svg=d3.select("body").append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");
            var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==2){
                  if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                   }
                   var circle=svg.append('circle')
                      .attr('cx',function(i){
                           cx=cx+40;
                           return cx;
                      })
                      .attr('cy',function(i){
                        return cy;
                      })
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(nameList[i])
                      .on("mouseover",function(){
                      var name=d3.select("#name");
                              name.text(d3.select(this).text())
                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)
                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);
            })
            n++;
                }
             }
         }

       //红色系按钮
         function red(){
                  d3.select('svg').remove();
                  var svg=d3.select("body").append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");
             var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==3){
                if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                   }
                   var circle=svg.append('circle')
                      .attr('cx',function(i){
                           cx=cx+40;
                           return cx;
                      })
                      .attr('cy',function(i){
                        return cy;
                      })
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(nameList[i])
                      .on("mouseover",function(){
                      var name=d3.select("#name");
                              name.text(d3.select(this).text())
                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)

                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);
            })
            n++;
                }
             }
         }

         //luose按钮
         function luose(){
                  d3.select('svg').remove();
                  var svg=d3.select("body").append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");
             var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==4){
                if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                   }
                   var circle=svg.append('circle')
                      .attr('cx',function(i){
                           cx=cx+40;
                           return cx;
                      })
                      .attr('cy',function(i){
                        return cy;
                      })
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(nameList[i])
                      .on("mouseover",function(){
                      var name=d3.select("#name");
                              name.text(d3.select(this).text())
                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)

                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);
            })
            n++;
                }
             }
         }

        //奇怪按钮
         function wird(){
                  d3.select('svg').remove();
                  var svg=d3.select("body").append('svg').attr('width',width-padding.left).attr('height',height-padding.top)
                          .attr('transform',"translate(" + padding.left + "," + padding.top + ")");
             var cx=80;
             var cy=60;
             var n=0;
             var brandY=65;
             var p=0,p1=0,p2=0,p3=0,p4=0,p5=0,p6=0;
             var a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a7=0; //不同品牌对应色系数量
             for(var i=0;i<colorList.length;i++){
                if(sortType[i]==5){
                if(brandDataset[i]=='迪奥'){
                              a1=a1+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('迪奥')
                                    .attr('x',60)
                                    .attr('y',60)
                                 if(a1%20==0)
                                   {
                                   p=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                                 var temp=brandY;
                             if(p==0)
                                {
                                   p=1;
                                   cx=90;
                                   brandY=brandY+40;
                                }
                                    }
                   else if(brandDataset[i]=='香奈儿CHANEL'){
                                a2=a2+1;
                                 svg.append('g')
                                    .append('text')
                                    .text('香奈儿CHANEL')
                                    .attr('x',0)
                                    .attr('y',temp)
                                 if(a2%20==0||p1==0)
                                   {
                                   p1=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp1=brandY;
                   }
                   else if(brandDataset[i]=='mac'){
                      a3=a3+1;
                       svg.append('g')
                                    .append('text')
                                    .text('魅可mac')
                                    .attr('x',30)
                                    .attr('y',temp1)
                                 if(a3%20==0||p2==0)
                                   {
                                   p2=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp2=brandY;
                   }
                   else if(brandDataset[i]=='YSL圣罗兰'){
                       a4=a4+1;
                       svg.append('g')
                                    .append('text')
                                    .text('YSL圣罗兰')
                                    .attr('x',20)
                                    .attr('y',temp2)
                                 if(a4%20==0||p3==0)
                                   {
                                   p3=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }

                          var temp3=brandY;
                   }
                     else if(brandDataset[i]=='LANCOME兰蔻'){
                       a5=a5+1;
                       svg.append('g')
                                    .append('text')
                                    .text('LANCOME兰蔻')
                                    .attr('x',0)
                                    .attr('y',temp3)
                                 if(a5%20==0||p4==0)
                                   {
                                   p4=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp4=brandY;
                   }
                   else if(brandDataset[i]=='TOM FORD'){
                      a6=a6+1;
                       svg.append('g')
                                    .append('text')
                                    .text('TOM FORD')
                                    .attr('x',15)
                                    .attr('y',temp4)
                                 if(a6%20==0||p5==0)
                                   {
                                   p5=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                          var temp5=brandY;
                   }
                   else if(brandDataset[i]=='ARMANI'){
                       a7=a7+1;
                       svg.append('g')
                                    .append('text')
                                    .text('ARMANI')
                                    .attr('x',20)
                                    .attr('y',temp5)
                                 if(a7%20==0||p6==0)
                                   {
                                   p6=1;
                                   brandY=brandY+40;
                                   cx=90;
                                   cy=cy+40;
                                   }
                   }
                   var circle=svg.append('circle')
                      .attr('cx',function(i){
                           cx=cx+40;
                           return cx;
                      })
                      .attr('cy',function(i){
                        return cy;
                      })
                      .attr('r',14)
                      .attr('fill',colorList[i])
                      .text(nameList[i])
                      .on("mouseover",function(){
                      var name=d3.select("#name");
                              name.text(d3.select(this).text())
                              d3.select(this)
                                .attr('r',16)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 3)
                      })
                      .on('mouseout', function (d) {
                              d3.select(this)
                                .attr('r',14)
                                .style("opacity", 1)
                                .style("stroke", "white")
                                .style("stroke-width", 0.3);

            })
            n++;
                }
             }
         }

function rgb2hsv(hex){
    [r,g,b]=htoi(hex)
    r= r/255.0
    g=g/255.0
    b=b/255.0
    let mx = Math.max(r, g, b)
    let mn = Math.min(r, g, b)
    let m = mx-mn
    if(mx == mn)
        h = 0
    else if(mx == r){
        if(g >= b)
            h = ((g-b)/m)*60
        else
            h = ((g-b)/m)*60 + 360
            }
    else if(mx == g)
        h = ((b-r)/m)*60 + 120
    else if(mx == b)
        h = ((r-g)/m)*60 + 240
    if(mx == 0)
        s = 0
    else
        s = m/mx
    let v = mx
    let H = h
    let S = s * 255.0
    let V = v * 255.0
    return [H, S, V]
    }
      //16进制转换为Rgb
        function htoi(hex) {
            s1 = hex.slice(1, 3);
            s2 = hex.slice(3, 5);
            s3 = hex.slice(5);
            a = s1.toLowerCase().charCodeAt(0);
            b = s1.toLowerCase().charCodeAt(1);
            c = s2.toLowerCase().charCodeAt(0);
            d = s2.toLowerCase().charCodeAt(1);
            e = s3.toLowerCase().charCodeAt(0);
            f = s3.toLowerCase().charCodeAt(1);
            return [rgbhtoi(a, b), rgbhtoi(c, d), rgbhtoi(e, f)];
        }

        function rgbhtoi(a, b) {
            if (a > 47 && a < 58) {
                a = (a - 48) * 16;
            }
            else if (a > 96 && a < 103) {
                a = (a - 87) * 16;
            }
            else {
                alert("error");
                return 0;
            }
            if (b > 47 && b < 58) {
                a = a + b - 48;
            }
            else if (b > 96 && b < 103) {
                a = a + b - 87;
            }
            else {
                alert("error");
                return 0;
            }
            return a;
        }

        function HsvDis(hsv1,hsv2){
           h1=hsv1[0];
           s1=hsv1[1];
           v1=hsv1[2];
           h2=hsv2[0];
           s2=hsv2[1];
           v2=hsv2[2];
           R=100;
           angle=30;
           h = R * Math.cos(angle / 180 * Math.PI);
           r = R * Math.sin(angle / 180 * Math.PI);
        x1 = r * v1 * s1 * Math.cos(h1 / 180 * Math.PI);
        y1 = r * v1 * s1 * Math.sin(h1 / 180 * Math.PI);
        z1 = h * (1 - v1);
        x2 = r * v2 * s2 * Math.cos(h2 / 180 * Math.PI);
        y2 = r * v2 * s2 * Math.sin(h2 / 180 * Math.PI);
        z2 = h * (1 - v2);
        dx = x1 - x2;
        dy = y1 - y2;
        dz = z1 - z2;
        return Math.sqrt(dx * dx + dy * dy + dz * dz);
        }
</script>
</body>
</html>
